<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>AYHEM â€” Ultra AI Connected MASTER</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f9fafb; color: #111; }
h2 { color: #1a73e8; }
#ayhem-search { margin: 10px 0; padding: 8px 12px; width: 100%; max-width: 550px; border-radius: 6px; border: 1px solid #aaa; font-size: 16px; }
#ayhem-explorer ul { list-style: none; padding-left: 1em; }
#ayhem-explorer li { margin: 0.3em 0; cursor: pointer; }
#ayhem-explorer li a { text-decoration: none; color: #1a73e8; }
#ayhem-explorer li a:hover { text-decoration: underline; }
ul li ul { margin-left: 1.2em; }
.status { margin-top: 10px; font-size: 14px; color: #555; }
.priority { font-weight: bold; color: #d93025; margin-left: 5px; }
</style>
</head>
<body>

<h2>AYHEM â€” Ultra AI Connected MASTER</h2>
<input type="text" id="ayhem-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„Ù Ø£Ùˆ Ù…Ø¬Ù„Ø¯...">
<div class="status" id="ayhem-status">Ø­Ø§Ù„Ø©: Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­Ù„ÙŠÙ„Ù‡Ø§...</div>
<div id="ayhem-explorer"></div>

<script>
/*
Ultimate AYHEM Ultra AI Connected â€” MASTER
- Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°Ø§ØªÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ¯Ø®Ù„
- Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ AYHEM CORE, Memory, Predictor
- ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ ÙˆØ°ÙƒØ§Ø¡ ØªÙ†Ø¨Ø¤ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ
- ØªØµÙ†ÙŠÙ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ©
- Ø§Ù„Ø­ÙØ§Ø¸ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
*/

const explorer = document.getElementById('ayhem-explorer');
const searchInput = document.getElementById('ayhem-search');
const status = document.getElementById('ayhem-status');

// Ù…Ø­Ø§ÙƒØ§Ø© fetch Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª
async function fetchDirectory(path = './') {
    try {
        const response = await fetch(path);
        const text = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, 'text/html');
        const links = Array.from(doc.querySelectorAll('a')).map(a => a.getAttribute('href')).filter(Boolean);
        return links.map(l => ({
            path: path + l,
            name: l.replace(/\/$/, ''),
            type: l.endsWith('/') ? 'folder' : 'file',
            modified: new Date()
        }));
    } catch (e) {
        console.error("Fetch error:", e);
        return [];
    }
}

// Ø¨Ù†Ø§Ø¡ Ø´Ø¬Ø±Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
function buildTree(files) {
    const root = document.createElement('ul');
    function addNode(parts, parent, fullPath, type, priority=0) {
        if(parts.length === 0) return;
        const part = parts[0];
        let li = Array.from(parent.children).find(c => c.dataset.name === part);
        if(!li){
            li = document.createElement('li');
            li.dataset.name = part;
            li.textContent = part;
            parent.appendChild(li);
            const ul = document.createElement('ul');
            li.appendChild(ul);
        }
        if(parts.length === 1){
            const link = document.createElement('a');
            link.textContent = part + (type==='folder'?' ğŸ“':' ğŸ“„');
            link.href = fullPath;
            link.target = "_blank";
            li.textContent = '';
            li.appendChild(link);
            if(priority > 0.7){
                const pr = document.createElement('span');
                pr.textContent = 'âš¡';
                pr.className = 'priority';
                li.appendChild(pr);
            }
        }
        addNode(parts.slice(1), li.querySelector('ul'), fullPath, type, priority);
    }
    files.forEach(f => {
        const parts = f.path.replace(/^\.\/|\/$/g,'').split('/');
        addNode(parts, root, f.path, f.type, f.priority);
    });
    return root;
}

// ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª recursively
async function scanAll(basePath = './') {
    let tree = [];
    const files = await fetchDirectory(basePath);
    for(const f of files){
        tree.push(f);
        if(f.type === 'folder'){
            const subTree = await scanAll(f.path);
            tree = tree.concat(subTree);
        }
    }
    return tree;
}

// Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø°ÙƒÙŠ Ø¨Ù…Ø­Ø±Ùƒ AYHEM CORE + Memory + Predictor
async function analyzeWithAYHEM(files) {
    try {
        const response = await fetch('https://your-ayhem-ai-endpoint.com/ultra-analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ files })
        });
        const aiResults = await response.json();
        files.forEach(f => {
            const aiFile = aiResults.find(a => a.path === f.path);
            if(aiFile){
                f.priority = aiFile.priority || Math.random();
                f.recommendation = aiFile.recommendation || '';
            } else {
                f.priority = Math.random();
            }
        });
    } catch(e){
        console.warn("AI Ultra analysis failed, using fallback.", e);
        files.forEach(f => { f.priority = Math.random(); });
    }
}

// Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°Ø§ØªÙŠ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙ…Ø±
async function runExplorer() {
    status.textContent = 'Ø­Ø§Ù„Ø©: Ø¬Ø§Ø±Ù ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­Ù„ÙŠÙ„Ù‡Ø§...';
    const allFiles = await scanAll('./');
    await analyzeWithAYHEM(allFiles);
    explorer.innerHTML = '';
    explorer.appendChild(buildTree(allFiles));
    status.textContent = 'Ø­Ø§Ù„Ø©: Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ âœ… ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©';
}

// Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ
searchInput.addEventListener('input', function() {
    const filter = this.value.toLowerCase();
    explorer.querySelectorAll('li').forEach(li => {
        const text = li.textContent.toLowerCase();
        li.style.display = text.includes(filter) ? "" : "none";
    });
});

// Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ
runExplorer();
setInterval(runExplorer, 30000);

</script>

</body>
</html>
